syntax = "proto3";

option java_multiple_files = false;
option java_package = "com.smartretail";
option java_outer_classname = "OvenProto";

package oven;

service OvenService {
  rpc getOvenStatus(OvenStatusRequest) returns (OvenStatusResponse) {}
  rpc ControlOven(OvenControlRequest) returns (OvenControlResponse) {}
  rpc MonitorOven(OvenMonitorRequest) returns (stream OvenStatusResponse) {}
  rpc OptimizeOven(stream OvenStatusResponse) returns (stream OvenControlRequest) {}

  // Server-side streaming RPC for health check
  rpc HealthCheck(HealthCheckRequest) returns (stream HealthCheckResponse) {}
}

message OvenStatusRequest {
  string ovenId = 1;
}

message OvenStatusResponse {
  string ovenId = 1;
  bool isOn = 2;
  string currentTask = 3;
  int32 temperature = 4;
  int32 bakingTimeRemaining = 5;
}

message OvenControlRequest {
  string ovenId = 1;
  bool turnOn = 2;
}

message OvenControlResponse {
  string ovenId = 1;
  string message = 2;
}

message OvenMonitorRequest {
  string ovenId = 1;
}

message HealthCheckRequest {
  string serviceName = 1;
  string serviceVersion = 2;
  int64 timestamp = 3;
}

message HealthCheckResponse {
  int32 status = 1;
  string message = 2;
}